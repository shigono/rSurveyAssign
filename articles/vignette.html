<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rSurveyAssign">
<title>rSurveyAssign: run simulations of assignments for web surveys • rSurveyAssign</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rSurveyAssign: run simulations of assignments for web surveys">
<meta property="og:description" content="rSurveyAssign">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rSurveyAssign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette.html">rSurveyAssign: run simulations of assignments for web surveys</a>
    <a class="dropdown-item" href="../articles/vignette_bias.html">How to estimate bias</a>
    <a class="dropdown-item" href="../articles/vignette_size.html">How to forecast sample size</a>
    <a class="dropdown-item" href="../articles/vignette_weight.html">How to compute survey weights</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>rSurveyAssign: run simulations of assignments for web surveys</h1>
                        <h4 data-toc-skip class="author">Shigeru
ONO</h4>
            
            <h4 data-toc-skip class="date">2024-03-21</h4>
      
      
      <div class="d-none name"><code>vignette.Rmd</code></div>
    </div>

    
    
<p><code>rSurveyAssign</code>パッケージは、web調査における対象者割付についてのシミュレーションを行うためのパッケージです。</p>
<p>このパッケージを使うと、ある種の対象者割付を行うweb調査について、必要な標本サイズを見積もったり、割付によって生じるバイアスを評価したりすることができます。また、すでに行った調査について調査ウェイトを求めることもできます。</p>
<p>ここでは、<code>rSurveyAssign</code>パッケージの背後にある考え方と、パッケージの用途について説明します。</p>
<div class="section level2">
<h2 id="事例-製品ブランドのイメージ測定">1. 事例: 製品ブランドのイメージ測定<a class="anchor" aria-label="anchor" href="#%E4%BA%8B%E4%BE%8B-%E8%A3%BD%E5%93%81%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E6%B8%AC%E5%AE%9A"></a>
</h2>
<p>このパッケージについて説明するための例として、
ある製品カテゴリの<span class="math inline">\(K\)</span>個の製品ブランドについて、消費者が抱いているイメージを測定したい、
という場面について考えます。</p>
<div class="section level3">
<h3 id="つの調査手続き">1.1 4つの調査手続き<a class="anchor" aria-label="anchor" href="#%E3%81%A4%E3%81%AE%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8D"></a>
</h3>
<p>次の4つの調査手続きについて考えてみましょう。</p>
<div class="section level4">
<h4 id="調査手続きa--すべてのブランドに割り付ける">調査手続きA. すべてのブランドに割り付ける<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8Da--%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%81%AB%E5%89%B2%E3%82%8A%E4%BB%98%E3%81%91%E3%82%8B"></a>
</h4>
<p>もっとも単純な手続きです。</p>
<ul>
<li>対象者に、あるブランドを提示し、そのブランドのイメージについての設問群に対する回答を求める。これを、<span class="math inline">\(K\)</span>個すべてのブランドについて繰り返す。</li>
</ul>
<p>この手続きでは、対象者は同一の設問群に対する回答を<span class="math inline">\(K\)</span>回繰り返す事になります。ブランドの数が多いときは、回答者への負荷が高くなってしまいます。</p>
</div>
<div class="section level4">
<h4 id="調査手続きb--j個のブランドに割り付ける">調査手続きB. J個のブランドに割り付ける<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8Db--j%E5%80%8B%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%81%AB%E5%89%B2%E3%82%8A%E4%BB%98%E3%81%91%E3%82%8B"></a>
</h4>
<p>次のような手続きも考えられます。ひとりの人に提示するブランド数を<span class="math inline">\(J\)</span>とします。<span class="math inline">\(J\)</span>はブランド数Kよりも小さく、十分に小さな値とします。</p>
<ul>
<li>調査者は、それぞれの対象者について、その人に提示するブランドを<span class="math inline">\(J\)</span>個選ぶ。</li>
<li>対象者に、割り付けられた<span class="math inline">\(J\)</span>個のブランドのうちひとつを提示し、イメージについての設問群に対する回答を求める。これを、<span class="math inline">\(J\)</span>個のブランドについて繰り返す。</li>
</ul>
<p>この手続きでは、ブランドの数がいくつあっても、
対象者は設問群への回答を<span class="math inline">\(J\)</span>回繰り返せば良いことになります。</p>
<p>以下ではこの手続きについて、「対象者を<span class="math inline">\(J\)</span>個のブランドに<strong>割り付ける</strong>」と表現します。</p>
</div>
<div class="section level4">
<h4 id="調査手続きc--知っているすべてのブランドに割り付ける">調査手続きC. 知っているすべてのブランドに割り付ける<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8Dc--%E7%9F%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%81%AB%E5%89%B2%E3%82%8A%E4%BB%98%E3%81%91%E3%82%8B"></a>
</h4>
<p>さて、ここまでの手続きでは、いずれの対象者も、いずれのブランドに対して割付可能であると仮定してきました。
しかし実際には、対象者はすべてのブランドについて知っているわけではないかもしれません。
対象者が知らないブランドについてイメージを訊ねても、有益な回答は得られないでしょう。</p>
<p>そこで、次のような手続きを考えます。</p>
<ul>
<li>それぞれの対象者に、<span class="math inline">\(K\)</span>個のブランドのリストを提示し、知っているブランドはどれかを訊ねる。</li>
<li>それぞれの対象者を、その人が知っているすべてのブランドに<strong>割り付ける</strong>。いずれのブランドについても知らないと答えた人に対しては、調査を中止する。</li>
<li>割り付けられたブランドのうちひとつを提示し、イメージについての設問群を提示し、
回答を求める。これを、その人が割り付けられたすべてのブランド(=その人が知っているすべてのブランド)について繰り返す。</li>
</ul>
<p>この手続きは、あるブランドについて得られる回答は、そのブランドについて知っている人のみから得られた回答になります。</p>
<p>その反面、たくさんのブランドを知っている人は、同一の設問群に対する回答を何度も繰り返すことになります。
回答者への負荷は回答者によってばらつき、多くのブランドを知っている人ほど負荷が高くなってしまいます。</p>
</div>
<div class="section level4">
<h4 id="調査手続きd--知っているブランドのうち1個j個に割り付ける">調査手続きD. 知っているブランドのうち1個～J個に割り付ける<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8Dd--%E7%9F%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%81%AE%E3%81%86%E3%81%A11%E5%80%8Bj%E5%80%8B%E3%81%AB%E5%89%B2%E3%82%8A%E4%BB%98%E3%81%91%E3%82%8B"></a>
</h4>
<p>そこで、次のような手続きを考えます。</p>
<ul>
<li>それぞれの対象者に、<span class="math inline">\(K\)</span>個のブランドのリストを提示し、知っているブランドはどれかを訊ねる。</li>
<li>それぞれの対象者を、その人が知っているブランドのうち<span class="math inline">\(1\)</span>個～<span class="math inline">\(J\)</span>個のブランドに<strong>割り付ける</strong>。いずれのブランドについても知らないと答えた人に対しては、調査を中止する。</li>
<li>割り付けられた<span class="math inline">\(J\)</span>個のブランドのうちひとつを提示し、
イメージについての設問群を提示し、回答を求める。これを、<span class="math inline">\(J\)</span>個のブランドについて繰り返す。</li>
</ul>
<p>この手続きでは、あるブランドについて得られる回答はそのブランドについて知っている人のみから得られた回答になります。また、ブランドの数がいくつあっても、対象者は設問群に対する回答を多くても<span class="math inline">\(J\)</span>回繰り返せば良いことになります。</p>
<p>調査手続きCやDのように、対象者の回答(各ブランドを知っているかどうか)に応じてその後の提示を変更する手続きは、古典的な質問紙調査では困難でした。web調査ならではの調査手続きといえるでしょう。</p>
</div>
</div>
<div class="section level3">
<h3 id="調査手続きの性質">1.2 調査手続きの性質<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8D%E3%81%AE%E6%80%A7%E8%B3%AA"></a>
</h3>
<p>上で検討した4つの調査手続きについて整理しておきましょう。</p>
<table class="table"><tbody>
<tr class="odd">
<td></td>
<td align="left">割付可能ブランド</td>
<td align="left">割付ブランド</td>
</tr>
<tr class="even">
<td>A.</td>
<td align="left">すべてのブランド</td>
<td align="left">すべてのブランド</td>
</tr>
<tr class="odd">
<td>B.</td>
<td align="left">すべてのブランド</td>
<td align="left">
<span class="math inline">\(1\)</span>～<span class="math inline">\(J\)</span>個のブランド</td>
</tr>
<tr class="even">
<td>C.</td>
<td align="left">知っているブランド</td>
<td align="left">すべてのブランド</td>
</tr>
<tr class="odd">
<td>D.</td>
<td align="left">知っているブランド</td>
<td align="left">
<span class="math inline">\(1\)</span>～<span class="math inline">\(J\)</span>個のブランド</td>
</tr>
</tbody></table>
<p>調査手続きDは、いっけん良い手続きのようにみえます。しかしこの手続きは、深刻な問題点を持っています。</p>
<p>第一に、事前に必要な対象者数を知ることが困難です。</p>
<p>それぞれのブランドのイメージを測定するために、それぞれのブランドについて十分な件数の回答を得たいとしましょう。</p>
<ul>
<li>調査手続きAでは、<span class="math inline">\(N\)</span>人の対象者に調査すれば、各ブランドについて<span class="math inline">\(N\)</span>件の回答が得られます。</li>
<li>調査手続きBでは、<span class="math inline">\(N\)</span>人の対象者に調査すれば、全ブランドを通じて延べ
<span class="math inline">\(N \times J\)</span>
件の回答が得られます。ブランドへの割付をバランス良く行えば、各ブランドについて
<span class="math inline">\((N \times J) / K\)</span>
件の回答が得られるはずです。</li>
<li>調査手続きCでは、対象者があるブランドについて知っている割合を<span class="math inline">\(P\)</span>としたとき、そのブランドについて <span class="math inline">\(N \times P\)</span>
件の回答が得られます。事前に別の情報源から <span class="math inline">\(P\)</span>
を推測できれば、十分な件数の回答を得るために必要な対象者数を逆算することができるでしょう。</li>
<li>しかし調査手続きDでは、各ブランドについて何件の回答が得られるかを事前に推測することが困難です。</li>
</ul>
<p>第二に、回答の集計値がバイアスを持ちます。</p>
<p>調査手続きDによって得た回答の集計値がどのような性質を持つか、簡単な例を通じて考えてみましょう。</p>
<p>調査対象のブランドを{A,B,C}の3つとし、割付ブランド数の上限を2個とします。また、対象者を割り付けるブランドは、知っているブランドのなかから等確率で選ぶと仮定します。調査手続きDでは、ブランドAへと割り付けられる可能性がある対象者は下表の4種類となります。</p>
<table class="table">
<thead><tr class="header">
<th align="left">Aについて</th>
<th align="left">Bについて</th>
<th align="left">Cについて</th>
<th align="left">Aについて聴取される確率</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">知っている</td>
<td align="left">知らない</td>
<td align="left">知らない</td>
<td align="left"><span class="math inline">\(1\)</span></td>
</tr>
<tr class="even">
<td align="left">知っている</td>
<td align="left">知っている</td>
<td align="left">知らない</td>
<td align="left"><span class="math inline">\(1\)</span></td>
</tr>
<tr class="odd">
<td align="left">知っている</td>
<td align="left">知らない</td>
<td align="left">知っている</td>
<td align="left"><span class="math inline">\(1\)</span></td>
</tr>
<tr class="even">
<td align="left">知っている</td>
<td align="left">知っている</td>
<td align="left">知っている</td>
<td align="left"><span class="math inline">\(2/3\)</span></td>
</tr>
</tbody>
</table>
<p>Aを知っている人たちのうち、すべてのブランドを知っている人はブランドAについて確率<span class="math inline">\(2/3\)</span>で聴取され、それ以外の人は確率<span class="math inline">\(1\)</span>で聴取されます。従って、Aについて収集した回答は、すべてのブランドを知っている人からの回答が少なめになってしまいます。</p>
<p>このように、調査手続きDでは、あるブランドに対する回答が、他のブランドについて知らない対象者による回答へと偏ることになります。これを<strong>割付バイアス</strong>と呼ぶことにします。</p>
<p>割付バイアスの大きさは、各ブランドが知られている程度や、割り付けるブランドの選び方によって複雑に変化します。そのため、推測するのは容易ではありません。</p>
</div>
<div class="section level3">
<h3 id="このパッケージの目的">1.3 このパッケージの目的<a class="anchor" aria-label="anchor" href="#%E3%81%93%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E7%9B%AE%E7%9A%84"></a>
</h3>
<p>上で述べた例のように、調査対象者に刺激を提示し反応を測定したい一方、個々の対象者に提示できる刺激に制約があるという場面は、調査実務において珍しくありません。調査コストの削減のため、調査手続きDのように割付の最適化を図る場合も多いでしょう。その反面、このような割付の最適化を行うと、事前の標本サイズ設計は困難になり、また調査結果は割付バイアスを持ちます。</p>
<p><code>rSurveyAssign</code>パッケージはこの問題に対処するためのパッケージです。このパッケージは、上記の調査手続きDのような割付最適化を伴う調査に対して、3つの機能を提供します。</p>
<ul>
<li>必要な対象者数を事前に推測する</li>
<li>集計値における割付バイアスを事前に評価する</li>
<li>集計値から割付バイアスを取り除くための調査ウェイトを算出する</li>
</ul>
<p><code>rSurveyAssign</code>パッケージは、Web調査における割付そのものを提供するパッケージではありません。割付の機能はWeb調査システムに別途組み込む必要があります。</p>
</div>
</div>
<div class="section level2">
<h2 id="このパッケージが想定している状況">2. このパッケージが想定している状況<a class="anchor" aria-label="anchor" href="#%E3%81%93%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%8C%E6%83%B3%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E7%8A%B6%E6%B3%81"></a>
</h2>
<div class="section level3">
<h3 id="カテゴリスロット割付可能性">2.1 カテゴリ・スロット・割付可能性<a class="anchor" aria-label="anchor" href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%82%B9%E3%83%AD%E3%83%83%E3%83%88%E5%89%B2%E4%BB%98%E5%8F%AF%E8%83%BD%E6%80%A7"></a>
</h3>
<p>このパッケージは、次の状況を想定して作られています。</p>
<ul>
<li>1つ以上の「<strong>カテゴリ</strong>」がある。</li>
<li>あるカテゴリは、1つ以上の「<strong>スロット</strong>」からなるリストを持つ。</li>
<li>すべてのカテゴリのすべてのスロットについて調査したい。</li>
<li>それぞれの調査対象者は、それぞれのカテゴリについて「<strong>割付可能</strong>」かそうでないかのいずれかである。</li>
<li>それぞれの調査対象者は、それぞれのスロットについて「<strong>割付可能</strong>」かそうでないかのいずれかである。</li>
<li>ある対象者を割り付けることができるカテゴリ・スロットの数には上限がある。</li>
</ul>
<p>たとえば、次のような状況がそうです。</p>
<ul>
<li>いくつかの製品カテゴリがある。</li>
<li>各製品カテゴリには、いくつかのブランドが含まれている。</li>
<li>すべての製品カテゴリのすべてのブランドについて、消費者の購入経験率やイメージを調べたい。</li>
<li>ある対象者に、あるカテゴリについて詳しく訊くためには、その対象者はそのカテゴリの
使用者でなければならない。</li>
<li>ある対象者に、あるブランドについて詳しく訊くためには、
その対象者はそのブランドについて知っていなければならない。</li>
<li>ある対象者に詳しく訊くことができるカテゴリ・スロットの数には上限がある。</li>
</ul>
<p>この例では、「カテゴリ」は製品カテゴリ、「スロット」はブランドに対応しています。
下の表を参照してください。</p>
<table class="table">
<thead><tr class="header">
<th align="left">このパッケージでの用語</th>
<th align="left">例</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">カテゴリ</td>
<td align="left">製品カテゴリ</td>
</tr>
<tr class="even">
<td align="left">カテゴリへの割付可能性</td>
<td align="left">その製品カテゴリを使用しているか</td>
</tr>
<tr class="odd">
<td align="left">割付カテゴリ数の上限</td>
<td align="left">ある人に最大で何カテゴリまで詳しく訊けるか</td>
</tr>
<tr class="even">
<td align="left">スロット</td>
<td align="left">ブランド</td>
</tr>
<tr class="odd">
<td align="left">スロットへの割付可能性</td>
<td align="left">そのブランドを知っているか</td>
</tr>
<tr class="even">
<td align="left">割付スロット数の上限</td>
<td align="left">ある人に最大で何ブランドまで詳しく訊けるか</td>
</tr>
</tbody>
</table>
<p>これは一例にすぎません。このパッケージは、「カテゴリ」「スロット」「割付可能」が
具体的に何を指すのかは問いません。また、割り付けたスロットについてなにを聴取するのかも問いません。</p>
</div>
<div class="section level3">
<h3 id="調査手続き">2.2 調査手続き<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%9F%BB%E6%89%8B%E7%B6%9A%E3%81%8D"></a>
</h3>
<p>このパッケージでは、Web調査を想定し、次のように仮定します。</p>
<ul>
<li>調査対象者の調査への参加は逐次的に行われると仮定します。すなわち、全員が同時に回答をはじめるのではなく、まちまちのタイミングで回答をはじめると仮定します。また、ある対象者のカテゴリ・スロットへの割付も逐次的に行われるものとします。</li>
<li>それぞれのスロットについて、そのスロットに割り付けたい対象者数が定められているとします。これを「<strong>目標対象者数</strong>」と呼びます。</li>
<li>調査実施中のある時点において、それまでに割り付けられた対象者数が目標対象者数に達していないスロットを「<strong>オープン</strong>」、達しているスロットを「<strong>クローズド</strong>」と形容することにします。</li>
<li>調査実施中のある時点において、オープンなスロットが1つ以上あるカテゴリを「<strong>オープン</strong>」、すべてのスロットがクローズドであるカテゴリを「<strong>クローズド</strong>」と形容することにします。</li>
</ul>
<p>本パッケージは以下に説明する調査手続きを想定します。</p>
<p><strong>Step 1.</strong>
ある人が調査に参加したとき、その人について、各カテゴリについて割付可能であるかどうかを調べる。</p>
<p><strong>Step 2.</strong>
なんらかの方法で、その対象者のすべての割付可能カテゴリのうちいくつかを選ぶ。
これを、「対象者を<strong>カテゴリに割り付ける</strong>」と呼び、
選択されたカテゴリを「<strong>割付カテゴリ</strong>」と呼ぶ。もし割付できなかったら、その対象者に
対する調査は中止する。</p>
<p><strong>Step 3.</strong>
対象者に、それぞれの割付カテゴリについて、スロットのリストを提示し、
それぞれについて割付可能かどうかを調べる。</p>
<p><strong>Step 4.</strong>
何らかの方法で、その対象者の割付可能スロットのなかからいくつかを選ぶ。
これを、「対象者を<strong>スロットに割り付ける</strong>」と表現し、
選択されたカテゴリを「<strong>割付スロット</strong>」と呼ぶ。もし割付できなかったら、
その対象者に対する調査は中止する。</p>
<p><strong>Step 5.</strong>
割付スロットについての詳細な設問を提示し、回答を得る。</p>
<p><strong>Step 6.</strong>
すべてのカテゴリがクローズドになったら、調査を終了する。</p>
</div>
</div>
<div class="section level2">
<h2 id="割付カテゴリ割付スロットの決定方法">3. 割付カテゴリ・割付スロットの決定方法<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%89%B2%E4%BB%98%E3%82%B9%E3%83%AD%E3%83%83%E3%83%88%E3%81%AE%E6%B1%BA%E5%AE%9A%E6%96%B9%E6%B3%95"></a>
</h2>
<p><strong>Step 2.</strong>で割付カテゴリを決め、<strong>Step
4.</strong>で割付スロットを決める際には、
さまざまな方法がありえます。本項では、<code>rSurveyAssign</code>パッケージがカバーする
割付カテゴリ・割付スロットの決定方法について説明します。</p>
<div class="section level3">
<h3 id="割付カテゴリの決定方法">3.1 割付カテゴリの決定方法<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%AE%E6%B1%BA%E5%AE%9A%E6%96%B9%E6%B3%95"></a>
</h3>
<p>割付カテゴリを決める方法は、次の4つの特徴によって整理することができます。</p>
<ul>
<li>割付タイプ</li>
<li>絞り込み条件</li>
<li>順序付け条件</li>
<li>除外条件</li>
</ul>
<p>順に説明します。
以下では、割り付けるカテゴリの最大数をJとします。</p>
<div class="section level4">
<h4 id="割付タイプ">割付タイプ<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%82%BF%E3%82%A4%E3%83%97"></a>
</h4>
<ul>
<li>adaptive: 適応的方法
<ul>
<li>各対象者について以下の手順で割り付けを行います。
<ul>
<li>
<strong>絞り込み</strong>:
その人の割付可能カテゴリのなかから、指定した条件
(絞り込み条件)を満たすカテゴリを選び、割付カテゴリの候補とする。</li>
<li>
<strong>順序付け</strong>:
選ばれた候補のなかから、指定された優先順位(順序付け条件)に従って
J個までのカテゴリを抜き出し、割付カテゴリとする。</li>
<li>
<strong>除外</strong>:
割付カテゴリが所定の条件(除外条件)に該当する場合は、割付を中止する。</li>
</ul>
</li>
<li>適応的方法では、必要とする調査対象者数がより少なくなります。</li>
<li>その反面、回答には割付バイアスが生じます。
なぜなら、ある対象者がある割付可能カテゴリを持っているとき、
その対象者がそのカテゴリに割り付けられるかどうかが、その対象者の
他のカテゴリについての割付可能性に応じて決まってしまうからです。</li>
</ul>
</li>
<li>nonadaptive: 非適応的方法
<ul>
<li>各対象者について以下の手順で割り付けを行います。
<ul>
<li>
<strong>順序付け</strong>: その対象者にとっての割付可能性は無視し、
すべてのカテゴリのなかから、指定された優先順位(順序付け条件)に従って
J数までのカテゴリを抜き出し、割付カテゴリの候補とする。</li>
<li>
<strong>絞り込み</strong>: 抜き出されたカテゴリのなかから、
指定した条件(絞り込み条件)に該当するカテゴリを選び、
割付カテゴリとする。</li>
<li>
<strong>除外</strong>:
割付カテゴリが所定の条件(除外条件)に該当する場合は、割付を中止する。</li>
</ul>
</li>
<li>非適応的割付は、多くの調査対象者数を必要とします。なぜなら、
絞り込みの結果、割付カテゴリが0個になってしまう対象者が多いからです。</li>
<li>その反面、回答において割付バイアスは生じにくくなります。
ある対象者がある割付可能カテゴリに割り付けられるかどうかが、その対象者の
他のカテゴリの割付可能性とは独立に決まっているからです。</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="絞り込み条件">絞り込み条件<a class="anchor" aria-label="anchor" href="#%E7%B5%9E%E3%82%8A%E8%BE%BC%E3%81%BF%E6%9D%A1%E4%BB%B6"></a>
</h4>
<p>次の2種類を想定します。</p>
<ul>
<li>all: その対象者の割付可能カテゴリを選ぶ。
<ul>
<li>このとき、割付カテゴリはクローズドでありうる点に注意してください。すでに目標票数に達しているカテゴリについても聴取することになります。いいかえれば、「無駄な」回答収集を行うことになります。</li>
</ul>
</li>
<li>open:
その対象者の割付可能カテゴリのうちオープンなカテゴリを選ぶ。</li>
</ul>
</div>
<div class="section level4">
<h4 id="ランキング条件">ランキング条件<a class="anchor" aria-label="anchor" href="#%E3%83%A9%E3%83%B3%E3%82%AD%E3%83%B3%E3%82%B0%E6%9D%A1%E4%BB%B6"></a>
</h4>
<p>以下の4種類を想定します。</p>
<ul>
<li>random: ランダムに並べる。</li>
<li>openclosed: 以下の順に並べる。(1)オープンなカテゴリ、ランダム順。
(2)クローズドなカテゴリ、ランダム順。</li>
<li>shortnum:
その時点でオープンなスロット数が多いカテゴリから順に並べる。</li>
<li>shortratio:
その時点でオープンなスロットが占める割合が大きいカテゴリから順に並べる。</li>
</ul>
<p>(shortratioとshortnum), open,
randomの順に、必要な調査対象者数が少なくなり、また
割付バイアスが生じる場合には割付バイアスが強くなると考えられます。</p>
</div>
<div class="section level4">
<h4 id="除外条件">除外条件<a class="anchor" aria-label="anchor" href="#%E9%99%A4%E5%A4%96%E6%9D%A1%E4%BB%B6"></a>
</h4>
<p>以下の2種類を想定します。</p>
<ul>
<li>none: なし。</li>
<li>allclosed:
割付カテゴリとして選ばれたカテゴリがすべてクローズドであったら、割付しない。
<ul>
<li>この方法では割付バイアスが生じることに注意してください。なぜなら、ある対象者において
ある割付可能カテゴリが割付カテゴリとして選ばれたとき、その対象者が実際にそのカテゴリに
割り付けられるかどうかが、その対象者の他のカテゴリについての割付可能性に応じて
決まってしまうからです。</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="組み合わせ">組み合わせ<a class="anchor" aria-label="anchor" href="#%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B"></a>
</h4>
<p><code>rSurveyAssign</code>パッケージは、上で述べた4つの特徴の組み合わせによる
割付方法をサポートしています。参考として、すべての組み合わせを下表に示します。</p>
<p>割り付けるカテゴリの最大数をJとします。</p>
<table class="table">
<thead><tr class="header">
<th align="left">割付タイプ</th>
<th align="left">絞り込み条件</th>
<th align="left">順序づけ条件</th>
<th align="left">除外条件</th>
<th align="left">割付カテゴリの選び方</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">random</td>
<td align="left">none</td>
<td align="left">その対象者の割付可能カテゴリからJ個までを等確率に選ぶ。</td>
</tr>
<tr class="even">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">random</td>
<td align="left">allclosed</td>
<td align="left">その対象者の割付可能カテゴリからJ個までを等確率に選ぶ。選ばれたカテゴリのなかにオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">openclosed</td>
<td align="left">none</td>
<td align="left">その対象者の割付可能カテゴリのうちオープンなものからJ個までを等確率に選ぶ。J個選べなかったら、その対象者の割付可能カテゴリのうちクローズドなものから不足個数までを等確率に選ぶ。</td>
</tr>
<tr class="even">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">openclosed</td>
<td align="left">allclosed</td>
<td align="left">その対象者の割付可能カテゴリのうちオープンなものからJ個までを等確率に選ぶ。J個選べなかったら、その対象者の割付可能カテゴリのうちクローズドなものから不足個数までを等確率に選ぶ。選ばれたカテゴリの中にオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">shortnum</td>
<td align="left">none</td>
<td align="left">その対象者の割付可能カテゴリから、オープンなスロットが多い順にJ個までを選ぶ。</td>
</tr>
<tr class="even">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">shortnum</td>
<td align="left">allclosed</td>
<td align="left">その対象者の割付可能カテゴリから、オープンなスロットが多い順にJ個までを選ぶ。選ばれたカテゴリの中にオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">shortratio</td>
<td align="left">none</td>
<td align="left">その対象者の割付可能カテゴリのうち、オープンなスロットが占める割合が高い順にJ個までを選ぶ。</td>
</tr>
<tr class="even">
<td align="left">adaptive</td>
<td align="left">all</td>
<td align="left">shortratio</td>
<td align="left">allclosed</td>
<td align="left">その対象者の割付可能カテゴリのうち、オープンなスロットが占める割合が高い順にJ個までを選ぶ。選ばれたカテゴリの中にオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">open</td>
<td align="left">random,openclosed</td>
<td align="left">none,allclosed</td>
<td align="left">その対象者のオープンな割付可能カテゴリからJ個までを等確率に選ぶ。</td>
</tr>
<tr class="even">
<td align="left">adaptive</td>
<td align="left">open</td>
<td align="left">shortnum</td>
<td align="left">none,allclosed</td>
<td align="left">その対象者のオープンな割付可能カテゴリから、オープンなスロットが多い順にJ個までを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">adaptive</td>
<td align="left">open</td>
<td align="left">shortratio</td>
<td align="left">none,allclosed</td>
<td align="left">その対象者のオープンな割付可能カテゴリから、オープンなスロットが占める割合が高い順にJ個までを選ぶ。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">random</td>
<td align="left">none</td>
<td align="left">すべてのカテゴリからJ個を等確率に抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">random</td>
<td align="left">allclosed</td>
<td align="left">すべてのカテゴリからJ個を等確率に抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。選ばれたカテゴリのなかにオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">openclosed</td>
<td align="left">none</td>
<td align="left">オープンなカテゴリからJ個までを等確率に抜き出す。J個抜き出せなかったら、クローズドなカテゴリから不足個数までを等確率に抜き出す。抜き出したカテゴリのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">openclosed</td>
<td align="left">allclosed</td>
<td align="left">オープンなカテゴリからJ個までを等確率に抜き出す。J個抜き出せなかったら、クローズドなカテゴリから不足個数までを等確率に抜き出す。抜き出したカテゴリのなかからその対象者の割付可能カテゴリを選ぶ。選ばれたカテゴリの中にオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">shortnum</td>
<td align="left">none</td>
<td align="left">すべてのカテゴリから、オープンなスロットが多い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">shortnum</td>
<td align="left">allclosed</td>
<td align="left">すべてのカテゴリから、オープンなスロットが多い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。選ばれたカテゴリのなかにオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">shortratio</td>
<td align="left">none</td>
<td align="left">すべてのカテゴリから、オープンなスロットが占める割合が高い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">nonadaptive</td>
<td align="left">all</td>
<td align="left">shortratio</td>
<td align="left">allclosed</td>
<td align="left">すべてのカテゴリから、オープンなスロットが占める割合が高い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。選ばれたカテゴリの中にオープンなカテゴリがなかったら割付しない。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">open</td>
<td align="left">random,openclosed</td>
<td align="left">none,allclosed</td>
<td align="left">オープンなカテゴリからJ個までを等確率に抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="odd">
<td align="left">nonadaptive</td>
<td align="left">open</td>
<td align="left">shortnum</td>
<td align="left">none,allclosed</td>
<td align="left">オープンなカテゴリからオープンなスロットが多い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
<tr class="even">
<td align="left">nonadaptive</td>
<td align="left">open</td>
<td align="left">shortratio</td>
<td align="left">none,allclosed</td>
<td align="left">オープンなカテゴリからオープンなスロットが占める割合が高い順にJ個までを抜き出し、そのなかからその対象者の割付可能カテゴリを選ぶ。</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="割付スロットの決定方法">3.2 割付スロットの決定方法<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%82%B9%E3%83%AD%E3%83%83%E3%83%88%E3%81%AE%E6%B1%BA%E5%AE%9A%E6%96%B9%E6%B3%95"></a>
</h3>
<p><strong>Step
4.</strong>で割付スロットを決める方法は、割付カテゴリを決める場合と同様です。
説明を以下のように読み替えてください。</p>
<ul>
<li>「カテゴリ」→「スロット」</li>
<li>「その時点でオープンなスロット数が多いカテゴリ」→「その時点で目標票数に対して不足している票数が多いスロット」</li>
<li>「その時点でオープンなスロットが占める割合が多いカテゴリ」→「その時点で目標票数に対して不足している票数の割合が高いスロット」</li>
</ul>
</div>
<div class="section level3">
<h3 id="割付スロット決定におけるカテゴリの決定方法">3.3 割付スロット決定におけるカテゴリの決定方法<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%82%B9%E3%83%AD%E3%83%83%E3%83%88%E6%B1%BA%E5%AE%9A%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%AE%E6%B1%BA%E5%AE%9A%E6%96%B9%E6%B3%95"></a>
</h3>
<p><strong>Step 4.</strong>で割付スロットを決める際、もし<strong>Step
2.</strong>で複数個のカテゴリへの割付が生じていたら、
割付スロットをどの割付カテゴリから選ぶかという問題が生じます。</p>
<p>現バージョンの<code>rSurveyAssign</code>パッケージは、以下に述べる方法のみを想定しています。</p>
<ul>
<li>割付カテゴリのなかからひとつを等確率に選び、そのカテゴリの割付可能スロットのなかから、前項で説明した方法で割付スロットを選ぶ。</li>
<li>割付スロットの選択が行われなかった場合(ひとつも選べなかった場合、ないし除外条件によって中止された場合)は、他の割付カテゴリのなかからひとつを等確率に選び、そのカテゴリの割付可能スロットのなかから、前項で説明した方法で割付スロットを選ぶ。これを繰り返し、どこかのカテゴリから割付スロットを選ぶことができるまで続ける。</li>
<li>どの割付カテゴリからも割付スロットが選ばれなかった場合は、その対象者に対する調査を中止する。</li>
</ul>
<p>ある対象者への割付スロットは必ず同一カテゴリのスロットとなる点に注意してください。</p>
<p>複数個のカテゴリへの割付を行う場合、スロットへの回答には割付バイアスが生じます。
なぜなら、対象者がある割付可能スロットに対して
割り付けられるかどうかが、他のカテゴリのスロットの割付可能性に応じて決まるからです。</p>
</div>
<div class="section level3">
<h3 id="割付に伴うバイアスはいつ生じるか">3.4 割付に伴うバイアスはいつ生じるか<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E4%BB%98%E3%81%AB%E4%BC%B4%E3%81%86%E3%83%90%E3%82%A4%E3%82%A2%E3%82%B9%E3%81%AF%E3%81%84%E3%81%A4%E7%94%9F%E3%81%98%E3%82%8B%E3%81%8B"></a>
</h3>
<p>カテゴリについての回答において割付バイアスが<strong>生じない</strong>のは、割付方法が以下の条件を満たすときに限られます。他の方法ではなんらかのバイアスが生じることになります。</p>
<ul>
<li>カテゴリ割付において非適応的方法を選んでいるか、割付カテゴリの最大数が十分に大きく、すべての割付可能カテゴリへの割付が生じている</li>
<li>カテゴリ割付において除外条件をnoneにしている</li>
</ul>
<p>スロットについての回答において割付バイアスが<strong>生じない</strong>のは、割付方法が以下の条件を満たすときに限られます。他の方法ではなんらかのバイアスが生じることになります。</p>
<ul>
<li>カテゴリ割付において非適応的方法を選んでいる</li>
<li>カテゴリ割付において除外条件をnoneにしている</li>
<li>割付カテゴリの最大数を1にしている</li>
<li>スロット割付において非適応的方法を選んでいるか、割付スロットの最大数が十分に大きく、すべての割付可能スロットへの割付が生じている</li>
<li>スロット割付において除外条件をnoneにしている</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="このパッケージの用途">4. このパッケージの用途<a class="anchor" aria-label="anchor" href="#%E3%81%93%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E7%94%A8%E9%80%94"></a>
</h2>
<p>このパッケージは、上記の手続きによる調査を実施しようと考えている調査者、ないしすでに実施した調査者のためのパッケージです。</p>
<p>このパッケージは、web調査の機能を提供するものではありません。web調査の実施中に、上記の手続きに従って対象者をカテゴリ・スロットへと割り付ける機能は、web調査システム上で別途実装する必要があります。</p>
<p>このパッケージの用途は次の3つです。</p>
<p><strong>標本サイズ推定</strong>:
上記の手続きによる<strong>調査を計画しているとき</strong>、
各スロットについて必要な回答件数を得るためにはどの程度の調査対象者数が必要か、
シミュレーションによって推定する。 使用方法は<a href="vignette_size.html">“How to forecast sample
size”</a>を参照して下さい。</p>
<p><strong>バイアス評価</strong>:
上記の手続きによる<strong>調査を計画しているとき</strong>、
調査結果が持つであろうバイアスを、シミュレーションによって評価する。
使用方法は<a href="vignette_bias.html">“How to estimate
bias”</a>を参照して下さい。</p>
<p><strong>ウェイト算出</strong>:
上記の手続きによる<strong>調査を行ったあとで</strong>、
集計のための調査ウェイトを、シミュレーションによって算出する。
使用方法は<a href="vignette_weight.html">“How to compute survey
weights”</a>を参照して下さい。</p>
<p>以上</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Shigeru ONO.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
